# this file is *not* meant to cover or endorse the use of GitHub Actions, but rather to
# help test this project

name: Test

on: [push, pull_request]

jobs:
  test:
    strategy:
      matrix:
        python: [3]
        platform: [windows-latest]
        py2exe: ['py2exe', 'git+https://github.com/py2exe/py2exe.git@freeze_api']
    runs-on: ${{ matrix.platform }}
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    - name: Set up Python ${{ matrix.python }}
      uses: actions/setup-python@v3
      with:
        python-version: ${{ matrix.python }}
    - name: Install test dependencies
      run: python -m pip install -U setuptools versioneer $PY2EXE
      env:
        PY2EXE: ${{ matrix.py2exe }}
    - name: Build
      run: python setup.py py2exe
    - uses: actions/upload-artifact@v3
      with:
        name: dist
        path: dist/
